<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  
  <title>Student Dashboard - Green Guardian</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 font-sans">

  <!-- âœ… Navbar -->
  <nav class="bg-gradient-to-r from-green-600 to-green-800 text-white px-8 py-4 flex justify-between items-center shadow-lg sticky top-0 z-50">
    <div class="text-2xl font-extrabold flex items-center gap-2">
      ğŸŒ± <span>Green Guardian</span>
    </div>
    <ul class="flex space-x-6 font-medium">
      <li><a href="{% url 'home' %}" class="hover:underline hover:text-green-200 transition">Home</a></li>
      <li><a href="#explore" class="hover:underline hover:text-green-200 transition">Explore</a></li>
      <li><a href="#games" class="hover:underline hover:text-green-200 transition">Games</a></li>
      <li><a href="#profile" class="hover:underline hover:text-green-200 transition">Profile</a></li>
    </ul>
  </nav>

  <!-- âœ… Welcome Section -->
  <header class="p-8 text-center">
    <h1 class="text-4xl font-bold text-green-800 mb-2">Welcome, {{ user.first_name }} ğŸŒ</h1>
    <p class="text-gray-600 text-lg">Track your eco journey, play games, and learn sustainability.</p>
  </header>

  <main class="max-w-7xl mx-auto px-6 md:px-8">

    <!-- âœ… Explore Section -->
    <section id="explore" class="mb-16">
      <h2 class="text-3xl font-semibold text-green-700 mb-6">ğŸŒ Explore Categories</h2>
      <p class="text-gray-500 mb-4">Categories count: {{ categories|length }}</p>

      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
        {% for category in categories %}
        <div class="bg-white rounded-2xl shadow-lg p-6 hover:scale-105 transition transform hover:bg-green-50 cursor-pointer">
          <h3 class="text-xl font-bold text-green-800 mb-2">{{ category.name }}</h3>
          <p class="text-gray-500 mb-4">{{ category.description|truncatewords:15 }}</p>
          <a href="{% url 'explore_subtopics' category.id %}" 
             class="inline-block text-white bg-gradient-to-r from-green-600 to-green-700 px-4 py-2 rounded-lg font-semibold hover:from-green-700 hover:to-green-800 transition">View Subtopics â†’</a>
        </div>
        {% empty %}
        <p class="text-gray-500">No categories found.</p>
        {% endfor %}
      </div>
    </section>

    <!-- âœ… Subtopics Section -->
    {% if subtopics %}
    <section class="mb-16">
      <h2 class="text-3xl font-semibold text-green-700 mb-6">ğŸ“š Subtopics in {{ category_selected.name }}</h2>
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
        {% for subtopic in subtopics %}
        <div class="bg-white shadow-lg rounded-xl p-4 flex justify-between items-center hover:scale-105 transform transition cursor-pointer">
          <span class="font-semibold text-gray-700">{{ subtopic.name }}</span>
          <a href="{% url 'explore_content' subtopic.id %}" 
             class="bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded-md font-medium transition">Explore</a>
        </div>
        {% endfor %}
      </div>
    </section>
    {% endif %}

    <!-- âœ… Learning Options Section -->
    {% if subtopic %}
    <section class="mb-16">
      <h2 class="text-3xl font-semibold text-green-700 mb-6">ğŸ“– {{ subtopic.name }} - Learning Options</h2>
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6">
        <a href="{% url 'notes' subtopic.id %}" class="bg-yellow-50 p-6 rounded-2xl shadow hover:scale-105 transition transform hover:bg-yellow-100 text-center">
          <h3 class="text-lg font-bold text-yellow-600 mb-2">ğŸ“ Notes</h3>
        </a>
        <a href="{% url 'quiz' subtopic.id %}" class="bg-indigo-50 p-6 rounded-2xl shadow hover:scale-105 transition transform hover:bg-indigo-100 text-center">
          <h3 class="text-lg font-bold text-indigo-600 mb-2">â“ Quiz</h3>
        </a>
        <a href="{% url 'puzzle' subtopic.id %}" class="bg-pink-50 p-6 rounded-2xl shadow hover:scale-105 transition transform hover:bg-pink-100 text-center">
          <h3 class="text-lg font-bold text-pink-600 mb-2">ğŸ§© Puzzle</h3>
        </a>
        <a href="{% url 'game' subtopic.id %}" class="bg-green-50 p-6 rounded-2xl shadow hover:scale-105 transition transform hover:bg-green-100 text-center">
          <h3 class="text-lg font-bold text-green-600 mb-2">ğŸ® Game</h3>
        </a>
      </div>
    </section>
    {% endif %}


    {% load static %}<!-- âœ… Games Section -->
<section id="games" class="mb-12">
  <h2 class="text-2xl font-semibold text-green-700 mb-4">ğŸ•¹ï¸ Recent Games</h2>

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6">
    <!-- Game 1 -->
    <div class="bg-white rounded-lg shadow p-6 hover:bg-green-50">
      <h3 class="text-lg font-bold text-green-800">Blue Planet Defender</h3>
      <p class="text-sm text-gray-600 mb-3">Save oceans, forests, and reefs in this interactive eco-game.</p>
      <a href="{% static 'games/Blue Planet Defender.html' %}" target="_blank"
         class="text-white bg-green-700 px-4 py-2 rounded hover:bg-green-800 inline-block">â–¶ Play</a>
    </div>

    <!-- Game 2 -->
    <div class="bg-white rounded-lg shadow p-6 hover:bg-green-50">
      <h3 class="text-lg font-bold text-green-800">Eco-Quest Waste Sorter</h3>
      <p class="text-sm text-gray-600 mb-3">Sort waste correctly and learn about recycling challenges.</p>
      <a href="{% static 'games/Eco-Quest Waste Sorter.html' %}" target="_blank"
         class="text-white bg-green-700 px-4 py-2 rounded hover:bg-green-800 inline-block">â–¶ Play</a>
    </div>

    <!-- Game 3 -->
    <div class="bg-white rounded-lg shadow p-6 hover:bg-green-50">
      <h3 class="text-lg font-bold text-green-800">Splash Saver</h3>
      <p class="text-sm text-gray-600 mb-3">Protect water resources in this fun water management game.</p>
      <a href="{% static 'games/Splash Saver.html' %}" target="_blank"
         class="text-white bg-green-700 px-4 py-2 rounded hover:bg-green-800 inline-block">â–¶ Play</a>
    </div>

    <!-- Game 4 -->
    <div class="bg-white rounded-lg shadow p-6 hover:bg-green-50">
      <h3 class="text-lg font-bold text-green-800">Welcome to Power Grid Guardians!</h3>
      <p class="text-sm text-gray-600 mb-3">Manage renewable energy and protect the grid from failures.</p>
      <a href="{% static 'games/Welcome to Power Grid Guardians!.html' %}" target="_blank"
         class="text-white bg-green-700 px-4 py-2 rounded hover:bg-green-800 inline-block">â–¶ Play</a>
    </div>
  </div>
    <div class="bg-white rounded-lg shadow p-6 hover:bg-green-50">
      <h3 class="text-lg font-bold text-green-800">Trash Catcher</h3>
      <p class="text-sm text-gray-600 mb-3">Catch garbage in right can.</p>
      <a href="{% static 'games/Trash_Catcher_v1/Trash Catcher.html' %}" target="_blank"
         class="text-white bg-green-700 px-4 py-2 rounded hover:bg-green-800 inline-block">â–¶ Play</a>
    </div>
  </div>

  <!-- Back to Dashboard -->
  <a href="{% url 'home' %}" class="mt-6 inline-block text-green-700 font-semibold hover:underline">
    â† Back to Dashboard
  </a>
</section>

    <!-- âœ… Profile Section -->
    <section id="profile" class="mb-16">
      <h2 class="text-3xl font-semibold text-green-700 mb-6">ğŸ‘¤ Profile</h2>
      <div class="bg-white rounded-2xl shadow-lg p-8 space-y-4">
        <p><strong>Username:</strong> {{ user.username }}</p>
        <p><strong>Role:</strong> {{ user.get_role_display }}</p>
        <p><strong>Email:</strong> {{ user.email }}</p>
        <p><strong>Contact No:</strong> {{ user.contact_no }}</p>
        <p><strong>Date of birth:</strong> {{ user.dob }}</p>
        <p><strong>Address:</strong> {{ user.address }}</p>
        <p><strong>institution:</strong> {{ student_profile.institution }}</p>
        <p><strong>institution:</strong> {{ student_profile.grade }}</p>
        <p><strong>EcoPoints:</strong> {{ total_points }}</p>

        <h3 class="text-xl font-semibold text-green-700 mt-4">ğŸ… Badges</h3>
        <div class="flex flex-wrap gap-2 mt-2">
          <!-- {% for badge in badges %}
          <span class="px-3 py-1 bg-yellow-200 rounded-full text-sm">{{ badge.badge.name }}</span>
          {% empty %}
          <p class="text-gray-500">No badges yet.</p>
          {% endfor %} -->
        </div>

        <div class="mt-4">
          <a href="{% url 'logout' %}" 
             class="bg-red-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-red-700 transition">Logout</a>
        </div>
      </div>
    </section>

  </main>

</body>
</html>
